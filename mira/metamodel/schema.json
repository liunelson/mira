{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/indralab/mira/main/mira/metamodel/schema.json",
  "title": "MIRA Metamodel Template Schema",
  "description": "MIRA metamodel templates give a high-level abstraction of modeling appropriate for many domains.",
  "definitions": {
    "Unit": {
      "title": "Unit",
      "description": "A unit of measurement.",
      "type": "object",
      "properties": {
        "expression": {
          "title": "Expression",
          "description": "The expression for the unit.",
          "type": "string",
          "example": "2*x"
        }
      },
      "required": [
        "expression"
      ]
    },
    "Concept": {
      "title": "Concept",
      "description": "A concept is specified by its identifier(s), name, and - optionally -\nits context.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the concept.",
          "type": "string"
        },
        "display_name": {
          "title": "Display Name",
          "description": "An optional display name for the concept. If not provided, the name can be used for display purposes.",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "An optional description of the concept.",
          "type": "string"
        },
        "identifiers": {
          "title": "Identifiers",
          "description": "A mapping of namespaces to identifiers.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "context": {
          "title": "Context",
          "description": "A mapping of context keys to values.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "units": {
          "title": "Units",
          "description": "The units of the concept.",
          "allOf": [
            {
              "$ref": "#/definitions/Unit"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "Template": {
      "title": "Template",
      "description": "The Template is a parent class for model processes",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        }
      }
    },
    "Provenance": {
      "title": "Provenance",
      "type": "object",
      "properties": {}
    },
    "ControlledConversion": {
      "title": "ControlledConversion",
      "description": "Specifies a process of controlled conversion from subject to outcome,\ncontrolled by the controller.",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "ControlledConversion",
          "const": "ControlledConversion",
          "enum": [
            "ControlledConversion"
          ],
          "type": "string"
        },
        "controller": {
          "$ref": "#/definitions/Concept"
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "outcome": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "controller",
        "subject",
        "outcome"
      ]
    },
    "GroupedControlledConversion": {
      "title": "GroupedControlledConversion",
      "description": "The Template is a parent class for model processes",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "GroupedControlledConversion",
          "const": "GroupedControlledConversion",
          "enum": [
            "GroupedControlledConversion"
          ],
          "type": "string"
        },
        "controllers": {
          "title": "Controllers",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Concept"
          }
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "outcome": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "controllers",
        "subject",
        "outcome"
      ]
    },
    "GroupedControlledProduction": {
      "title": "GroupedControlledProduction",
      "description": "Specifies a process of production controlled by several controllers",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "GroupedControlledProduction",
          "const": "GroupedControlledProduction",
          "enum": [
            "GroupedControlledProduction"
          ],
          "type": "string"
        },
        "controllers": {
          "title": "Controllers",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Concept"
          }
        },
        "outcome": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "controllers",
        "outcome"
      ]
    },
    "ControlledProduction": {
      "title": "ControlledProduction",
      "description": "Specifies a process of production controlled by one controller",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "ControlledProduction",
          "const": "ControlledProduction",
          "enum": [
            "ControlledProduction"
          ],
          "type": "string"
        },
        "controller": {
          "$ref": "#/definitions/Concept"
        },
        "outcome": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "controller",
        "outcome"
      ]
    },
    "NaturalConversion": {
      "title": "NaturalConversion",
      "description": "Specifies a process of natural conversion from subject to outcome",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "NaturalConversion",
          "const": "NaturalConversion",
          "enum": [
            "NaturalConversion"
          ],
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "outcome": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "subject",
        "outcome"
      ]
    },
    "NaturalProduction": {
      "title": "NaturalProduction",
      "description": "A template for the production of a species at a constant rate.",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "NaturalProduction",
          "const": "NaturalProduction",
          "enum": [
            "NaturalProduction"
          ],
          "type": "string"
        },
        "outcome": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "outcome"
      ]
    },
    "NaturalDegradation": {
      "title": "NaturalDegradation",
      "description": "A template for the degradataion of a species at a proportional rate to its amount.",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "NaturalDegradation",
          "const": "NaturalDegradation",
          "enum": [
            "NaturalDegradation"
          ],
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "subject"
      ]
    },
    "ControlledDegradation": {
      "title": "ControlledDegradation",
      "description": "Specifies a process of degradation controlled by one controller",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "ControlledDegradation",
          "const": "ControlledDegradation",
          "enum": [
            "ControlledDegradation"
          ],
          "type": "string"
        },
        "controller": {
          "$ref": "#/definitions/Concept"
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "controller",
        "subject"
      ]
    },
    "GroupedControlledDegradation": {
      "title": "GroupedControlledDegradation",
      "description": "Specifies a process of degradation controlled by several controllers",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "GroupedControlledDegradation",
          "const": "GroupedControlledDegradation",
          "enum": [
            "GroupedControlledDegradation"
          ],
          "type": "string"
        },
        "controllers": {
          "title": "Controllers",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Concept"
          }
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "controllers",
        "subject"
      ]
    },
    "StaticConcept": {
      "title": "StaticConcept",
      "description": "Specifies a standalone Concept.",
      "type": "object",
      "properties": {
        "rate_law": {
          "title": "Rate Law",
          "type": "string",
          "example": "2*x"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "type": {
          "title": "Type",
          "default": "StaticConcept",
          "const": "StaticConcept",
          "enum": [
            "StaticConcept"
          ],
          "type": "string"
        },
        "subject": {
          "$ref": "#/definitions/Concept"
        },
        "provenance": {
          "title": "Provenance",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Provenance"
          }
        }
      },
      "required": [
        "subject"
      ]
    },
    "Distribution": {
      "title": "Distribution",
      "description": "A distribution of values for a parameter.",
      "type": "object",
      "properties": {
        "type": {
          "title": "Type",
          "description": "The type of distribution, e.g. 'uniform', 'normal', etc.",
          "type": "string"
        },
        "parameters": {
          "title": "Parameters",
          "description": "The parameters of the distribution.",
          "type": "object",
          "additionalProperties": {
            "type": "number"
          }
        }
      },
      "required": [
        "type",
        "parameters"
      ]
    },
    "Parameter": {
      "title": "Parameter",
      "description": "A Parameter is a special type of Concept that carries a value.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the concept.",
          "type": "string"
        },
        "display_name": {
          "title": "Display Name",
          "description": "An optional display name for the concept. If not provided, the name can be used for display purposes.",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "An optional description of the concept.",
          "type": "string"
        },
        "identifiers": {
          "title": "Identifiers",
          "description": "A mapping of namespaces to identifiers.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "context": {
          "title": "Context",
          "description": "A mapping of context keys to values.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "units": {
          "title": "Units",
          "description": "The units of the concept.",
          "allOf": [
            {
              "$ref": "#/definitions/Unit"
            }
          ]
        },
        "value": {
          "title": "Value",
          "description": "Value of the parameter.",
          "type": "number"
        },
        "distribution": {
          "title": "Distribution",
          "description": "A distribution of values for the parameter.",
          "allOf": [
            {
              "$ref": "#/definitions/Distribution"
            }
          ]
        }
      },
      "required": [
        "name"
      ]
    },
    "Initial": {
      "title": "Initial",
      "description": "An initial condition.",
      "type": "object",
      "properties": {
        "concept": {
          "$ref": "#/definitions/Concept"
        },
        "value": {
          "title": "Value",
          "type": "number"
        }
      },
      "required": [
        "concept",
        "value"
      ]
    },
    "Observable": {
      "title": "Observable",
      "description": "An observable is a special type of Concept that carries an expression.\n\nObservables are used to define the readouts of a model, useful when a\nreadout is not defined as a state variable but is rather a function of\nstate variables.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the concept.",
          "type": "string"
        },
        "display_name": {
          "title": "Display Name",
          "description": "An optional display name for the concept. If not provided, the name can be used for display purposes.",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "An optional description of the concept.",
          "type": "string"
        },
        "identifiers": {
          "title": "Identifiers",
          "description": "A mapping of namespaces to identifiers.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "context": {
          "title": "Context",
          "description": "A mapping of context keys to values.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "units": {
          "title": "Units",
          "description": "The units of the concept.",
          "allOf": [
            {
              "$ref": "#/definitions/Unit"
            }
          ]
        },
        "expression": {
          "title": "Expression",
          "description": "The expression for the observable.",
          "type": "string",
          "example": "2*x"
        }
      },
      "required": [
        "name",
        "expression"
      ]
    },
    "Author": {
      "title": "Author",
      "description": "A metadata model for an author.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the author",
          "type": "string"
        }
      },
      "required": [
        "name"
      ]
    },
    "Annotations": {
      "title": "Annotations",
      "description": "A metadata model for model-level annotations.\n\nExamples in this metadata model are taken from\nhttps://www.ebi.ac.uk/biomodels/BIOMD0000000956,\na well-annotated SIR model in the BioModels database.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "A human-readable label for the model",
          "example": "SIR model of scenarios of COVID-19 spread in CA and NY",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A description of the model",
          "example": "The coronavirus disease 2019 (COVID-19) pandemic has placed epidemic modeling at the forefront of worldwide public policy making. Nonetheless, modeling and forecasting the spread of COVID-19 remains a challenge. Here, we detail three regional scale models for forecasting and assessing the course of the pandemic. This work demonstrates the utility of parsimonious models for early-time data and provides an accessible framework for generating policy-relevant insights into its course. We show how these models can be connected to each other and to time series data for a particular region. Capable of measuring and forecasting the impacts of social distancing, these models highlight the dangers of relaxing nonpharmaceutical public health interventions in the absence of a vaccine or antiviral therapies.",
          "type": "string"
        },
        "license": {
          "title": "License",
          "description": "Information about the licensing of the model artifact. Ideally, given as an SPDX identifier like CC0 or CC-BY-4.0. For example, models from the BioModels databases are all licensed under the CC0 public attribution license.",
          "example": "CC0",
          "type": "string"
        },
        "authors": {
          "title": "Authors",
          "description": "A list of authors/creators of the model. This is not the same as the people who e.g., submitted the model to BioModels",
          "example": [
            {
              "name": "Andrea L Bertozzi"
            },
            {
              "name": "Elisa Franco"
            },
            {
              "name": "George Mohler"
            },
            {
              "name": "Martin B Short"
            },
            {
              "name": "Daniel Sledge"
            }
          ],
          "type": "array",
          "items": {
            "$ref": "#/definitions/Author"
          }
        },
        "references": {
          "title": "References",
          "description": "A list of CURIEs (i.e., <prefix>:<identifier>) corresponding to literature references that describe the model. Do **not** duplicate the same publication with different CURIEs (e.g., using pubmed, pmc, and doi)",
          "example": [
            "pubmed:32616574"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "time_scale": {
          "title": "Time Scale",
          "description": "The granularity of the time element of the model, typically on the scale of days, weeks, or months for epidemiology models",
          "example": "day",
          "type": "string"
        },
        "time_start": {
          "title": "Time Start",
          "description": "The start time of the applicability of a model, given as a datetime. When the time scale is not so granular, leave the less granular fields as default, i.e., if the time scale is on months, give dates like YYYY-MM-01 00:00",
          "type": "string",
          "format": "date-time"
        },
        "time_end": {
          "title": "Time End",
          "description": "Similar to the start time of the applicability of a model, the end time is given as a datetime. For example, the Bertozzi 2020 model is applicable between March and August 2020, so this field is annotated with August 1st, 2020.",
          "type": "string",
          "format": "date-time"
        },
        "locations": {
          "title": "Locations",
          "description": "A location or list of locations where this model is applicable, ideally annotated using a CURIEs referencing a controlled vocabulary such as GeoNames, which has multiple levels of granularity including city/state/country level terms. For example,the Bertozzi 2020 model was for New York City (geonames:5128581) and California (geonames:5332921)",
          "example": [
            "geonames:5128581",
            "geonames:5332921"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "pathogens": {
          "title": "Pathogens",
          "description": "The pathogens present in the model, given with CURIEs referencing vocabulary for taxa, ideally, NCBI Taxonomy. For example, the Bertozzi 2020 model is about SARS-CoV-2, this is ncbitaxon:2697049. Do not confuse this field with terms for annotating the disease caused by the pathogen. Note that some models may have multiple pathogens, for simulating double pandemics such as the interaction with SARS-CoV-2 and the seasonal flu.",
          "example": [
            "ncbitaxon:2697049"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "diseases": {
          "title": "Diseases",
          "description": "The diseases caused by pathogens in the model, given with CURIEs referencing vocabulary for dieases, such as DOID, EFO, or MONDO. For example, the Bertozzi 2020 model is about SARS-CoV-2, which causes COVID-19. In the Human Disease Ontology (DOID), this is referenced by doid:0080600.",
          "example": [
            "doid:0080600"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "hosts": {
          "title": "Hosts",
          "description": "The hosts present in the model, given with CURIEs referencing vocabulary for taxa, ideally, NCBI Taxonomy. For example, the Bertozzi 2020 model is about human infection by SARS-CoV-2. Therefore, the appropriate annotation for this field would be ncbitaxon:9606. Note that some models have multiple hosts, such as Malaria models that consider humans and mosquitos.",
          "example": [
            "ncbitaxon:9606"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "model_types": {
          "title": "Model Types",
          "description": "This field describes the type(s) of the model using the Mathematical Modeling Ontology (MAMO), which has terms like 'ordinary differential equation  model', 'population model', etc. These should be annotated as CURIEs in the form of mamo:<local unique identifier>. For example, the Bertozzi 2020 model is a population model (mamo:0000028) and ordinary differential equation model (mamo:0000046)",
          "example": [
            "mamo:0000028",
            "mamo:0000046"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Time": {
      "title": "Time",
      "description": "A special type of Concept that represents time.",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The symbol of the time variable in the model.",
          "default": "t",
          "type": "string"
        },
        "units": {
          "title": "Units",
          "description": "The units of the time variable.",
          "allOf": [
            {
              "$ref": "#/definitions/Unit"
            }
          ]
        }
      }
    },
    "TemplateModel": {
      "title": "TemplateModel",
      "description": "A template model.",
      "type": "object",
      "properties": {
        "templates": {
          "title": "Templates",
          "description": "A list of any child class of Templates",
          "type": "array",
          "items": {
            "discriminator": {
              "propertyName": "type",
              "mapping": {
                "NaturalConversion": "#/definitions/NaturalConversion",
                "ControlledConversion": "#/definitions/ControlledConversion",
                "NaturalDegradation": "#/definitions/NaturalDegradation",
                "ControlledDegradation": "#/definitions/ControlledDegradation",
                "GroupedControlledDegradation": "#/definitions/GroupedControlledDegradation",
                "NaturalProduction": "#/definitions/NaturalProduction",
                "ControlledProduction": "#/definitions/ControlledProduction",
                "GroupedControlledConversion": "#/definitions/GroupedControlledConversion",
                "GroupedControlledProduction": "#/definitions/GroupedControlledProduction",
                "StaticConcept": "#/definitions/StaticConcept"
              }
            },
            "oneOf": [
              {
                "$ref": "#/definitions/NaturalConversion"
              },
              {
                "$ref": "#/definitions/ControlledConversion"
              },
              {
                "$ref": "#/definitions/NaturalDegradation"
              },
              {
                "$ref": "#/definitions/ControlledDegradation"
              },
              {
                "$ref": "#/definitions/GroupedControlledDegradation"
              },
              {
                "$ref": "#/definitions/NaturalProduction"
              },
              {
                "$ref": "#/definitions/ControlledProduction"
              },
              {
                "$ref": "#/definitions/GroupedControlledConversion"
              },
              {
                "$ref": "#/definitions/GroupedControlledProduction"
              },
              {
                "$ref": "#/definitions/StaticConcept"
              }
            ]
          }
        },
        "parameters": {
          "title": "Parameters",
          "description": "A dict of parameter values where keys correspond to how the parameter appears in rate laws.",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/Parameter"
          }
        },
        "initials": {
          "title": "Initials",
          "description": "A dict of initial condition values where keyscorrespond to concept names they apply to.",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/Initial"
          }
        },
        "observables": {
          "title": "Observables",
          "description": "A list of observables that are readouts from the model.",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/Observable"
          }
        },
        "annotations": {
          "title": "Annotations",
          "description": "A structure containing model-level annotations. Note that all annotations are optional.",
          "allOf": [
            {
              "$ref": "#/definitions/Annotations"
            }
          ]
        },
        "time": {
          "title": "Time",
          "description": "A structure containing time-related annotations. Note that all annotations are optional.",
          "allOf": [
            {
              "$ref": "#/definitions/Time"
            }
          ]
        }
      },
      "required": [
        "templates"
      ]
    }
  }
}